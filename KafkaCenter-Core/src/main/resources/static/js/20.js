(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{898:function(e,t,n){"use strict";var r=n(385),a=n(270),o=n(38),i=n(12),c=n(89),l=n(16),s=n(156),u=n(69),f=n(82),p=n(21),h=n(134),m=n(47),d=n(1),y=n.n(d),b=n(23),v=n(105);function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function S(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function D(e,t,n){return t&&w(e.prototype,t),n&&w(e,n),e}function E(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}function O(e,t){return(O=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function I(e){var t=k();return function n(){var r=x(e),a;if(t){var o=x(this).constructor;a=Reflect.construct(r,arguments,o)}else a=r.apply(this,arguments);return C(this,a)}}function C(e,t){return!t||"object"!==g(t)&&"function"!=typeof t?T(e):t}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}var P=m.a.Row,j=m.a.Col,R=function(e){E(n,e);var t=I(n);function n(e){var r;S(this,n),(r=t.call(this,e)).componentWillUnmount=function(){r.mounted=!1},r.arrayIsEqual=function(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(var n=0;n<e.length;n+=1){var r=JSON.stringify(e[n]),a=JSON.stringify(t[n]);if(0!==r.localeCompare(a))return!1}return!0},r.refreshTableData=function(e){r.props.refreshTableData(e)},r.getCluster=function(){var e=[{value:"-1",label:"ALL"}];b.a.get("/monitor/cluster").then((function(t){if(200===t.data.code){var n=t.data.data[0].id,a=t.data.data[0].name,o=r.state.clusterValue;t.data.data.forEach((function(t){t.id<n&&(n=t.id,a=t.name),e.push({value:t.id,label:t.name})}));var i=Object(v.a)(r.props.id).id;if(null!=i?r.props.refreshDataSource(i):r.props.refreshDataSource(n),void 0===o&&"settingUser"!==r.props.id&&"settingTeam"!==r.props.id){var c={id:n,cluster:a,isAll:!1};Object(v.d)(r.props.id,c),o=a}r.setState({clusterSelectData:e,clusterValue:o})}})).catch((function(e){console.error("error",e),void 0!==e.response&&void 0!==e.response.status&&""!==e.response.status&&null!=e.response.status&&null!=e.response.status&&(401===e.response.status?p.a.error({content:"Please login!",closeable:!0}):p.a.error({content:"get cluster faily!",duration:1e4,closeable:!0}))}))},r.handleClusterFilterChange=function(e,t){r.props.refreshDataSource(t.value);var n=r.state.dataSource;e=t.label.toString();var a={id:t.value,cluster:t.label,isAll:!1};"-1"===t.value&&(a.isAll=!0),Object(v.d)(r.props.id,a);var o=r.filterByPara(n,r.state.clusterField,e,r.state.searchField,r.state.searchValue,r.state.switchField,r.state.switchValue);r.setState({clusterValue:e}),r.refreshTableData(o)},r.handleFilterChange=function(e){e=e.toString();var t=r.state.dataSource,n=r.filterByPara(t,r.state.clusterField,r.state.clusterValue,r.state.searchField,e,r.state.switchField,r.state.switchValue);r.setState({searchValue:e}),r.refreshTableData(n),r.setSesion("".concat(r.props.id,"Search"),e)},r.onSwitchChange=function(e){var t=r.state.dataSource,n=r.filterByPara(t,r.state.clusterField,r.state.clusterValue,r.state.searchField,r.state.searchValue,r.state.switchField,e);r.setState({switchValue:e}),r.refreshTableData(n),r.setSesion("".concat(r.props.id,"Switch"),e)},r.setSesion=function(e,t){void 0!==e&&sessionStorage.setItem(e,t)},r.initData=function(e){var t=JSON.parse(JSON.stringify(e)),n=r.filterByPara(t,r.state.clusterField,r.state.clusterValue,r.state.searchField,r.state.searchValue,r.state.switchField,r.state.switchValue);r.setState({dataSource:t}),r.refreshTableData(n)},r.filterByPara=function(e,t,n,a,o,i,c){var l=JSON.parse(JSON.stringify(e));return r.isNullOrEmptyStr(i)||c&&"false"!==c||(l=l.filter((function(e){return!e[i].startsWith("_")}))),r.isNullOrEmptyStr(n)||"ALL"===n||(l=r.searchdata(l,t,n)),r.isNullOrEmptyStr(o)||(l=r.searchdata(l,a,o)),l},r.searchdata=function(e,t,n){var r=t.split(",");return e.filter((function(e){for(var t=!1,a=0,o=r.length;a<o;a+=1){for(var i=r[a].split("."),c=e,l=0,s=i.length;l<s;l+=1)c=c[i[l]];if(-1!==c.toLocaleLowerCase().search(n.toLocaleLowerCase())){t=!0;break}}return t}))},r.isNullOrEmptyStr=function(e){return null==e||""===e},r.selectView=function(e){return y.a.createElement(j,{align:"center"},y.a.createElement("span",{style:{fontWeight:"600"}},e,":\xa0\xa0\xa0"),y.a.createElement(u.a,{showSearch:!0,dataSource:r.state.clusterSelectData,placeholder:"please select cluster",style:{width:"300px"},onChange:function e(t,n,a){r.handleClusterFilterChange(t,a)},value:r.state.clusterValue}))},r.filterView=function(e,t){return y.a.createElement(j,{align:"center"},y.a.createElement("span",{style:{fontWeight:"600"}},e,":\xa0\xa0\xa0"),y.a.createElement(l.a,{placeholder:r.isNullOrEmptyStr(t)?"Input filter value":t,hasClear:!0,onChange:r.handleFilterChange,style:{width:"300px"},value:r.state.searchValue}))},r.parseBoolean=function(e){return"true"===e||"TRUE"===e||"True"===e||"false"!==e&&"FALSE"!==e&&"False"!==e&&void 0},r.getFilterData=function(e){var t=JSON.parse(JSON.stringify(e)),n;return r.filterByPara(t,r.state.clusterField,r.state.clusterValue,r.state.searchField,r.state.searchValue,r.state.switchField,r.state.switchValue)},r.switchView=function(){var e=r.state.switchValue;return"string"==typeof r.state.switchValue&&(e=r.parseBoolean(r.state.switchValue.trim())),y.a.createElement(j,{align:"center"},y.a.createElement("div",{style:{display:"flex"}},y.a.createElement("span",{style:_.special},"Include special topic:\xa0\xa0"),y.a.createElement(a.a,{onChange:r.onSwitchChange,checked:e,defaultChecked:e,checkedChildren:y.a.createElement(i.a,{type:"select",size:"xs"}),unCheckedChildren:y.a.createElement(i.a,{type:"close",size:"xs"})})))},void 0!==r.props.onRef&&r.props.onRef(T(r));var o=sessionStorage.getItem("".concat(r.props.id,"Search")),c=sessionStorage.getItem("".concat(r.props.id,"Switch"));return r.state={dataSource:r.props.dataSource,clusterSelectData:[],clusterValue:Object(v.a)(r.props.id).cluster,clusterField:r.props.selectField,searchValue:null===o?"":o,searchField:r.props.searchField,switchField:r.props.switchField,switchValue:null!==c&&c},r}return D(n,[{key:"componentWillMount",value:function e(){this.mounted=!0}},{key:"componentDidMount",value:function e(){this.getCluster()}},{key:"componentWillReceiveProps",value:function e(t){this.validateCondition(this.state.dataSource,t.dataSource)&&(this.setState({dataSource:t.dataSource}),this.initData(t.dataSource))}},{key:"validateCondition",value:function e(t,n){return(null!=t||null!=n)&&((void 0!==t||void 0!==n)&&((0!==t.length||0!==n.length)&&(!this.arrayIsEqual(t,n)&&t!==n)))}},{key:"render",value:function e(){var t=this.props.selectTitle,n=this.props.searchTitle,r=this.props.searchPlaceholder,a=this.isNullOrEmptyStr(t)?"":this.selectView(t),o=this.isNullOrEmptyStr(n)?"":this.filterView(n,r),i=this.isNullOrEmptyStr(this.props.otherComponent)?"":this.props.otherComponent,c=this.isNullOrEmptyStr(this.props.switchField)?"":this.switchView();return y.a.createElement(P,{style:_.row},a,o,i,c)}}]),n}(d.Component),_={row:{margin:"20px 4px 20px"},special:{fontFamily:'Roboto, "Helvetica Neue", Helvetica, Tahoma, Arial, "PingFang SC", "Microsoft YaHei"',fontSize:"12px",lineHeight:"1.28571",color:"#333333",alignSelf:"center",fontWeight:"600"}},U=t.a=R},917:function(e,t,n){"use strict";var r=n(1),a=n.n(r),o=n(18);function i(e,t){return f(e)||u(e,t)||l(e,t)||c()}function c(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i=e[Symbol.iterator](),c;!(r=(c=i.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw o}}return n}}function f(e){if(Array.isArray(e))return e}function p(e){var t=e.children,n,r,c,l;return e.rolename===i(Object(o.useAuth)(),1)[0].role?t:a.a.createElement("div",null)}t.a=p},968:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),o=n(68),i=n.n(o),c=n(158),l=n(200),s=n(22),u=n(62),f=n(20),p=n(38),h=n(12),m=n(82),d=n(21),y=n(157),b=n(83),v=n(134),g=n(47),S=n(23),w=n(917),D=n(384),E=n(269),O=n(898),I=n(89),C=n(16),T=n(13);function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function x(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function P(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function j(e,t,n){return t&&P(e.prototype,t),n&&P(e,n),e}function R(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}function _(e,t){return(_=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function U(e){var t=N();return function n(){var r=B(e),a;if(t){var o=B(this).constructor;a=Reflect.construct(r,arguments,o)}else a=r.apply(this,arguments);return F(this,a)}}function F(e,t){return!t||"object"!==k(t)&&"function"!=typeof t?V(e):t}function V(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function N(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function B(e){return(B=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}var L=g.a.Row,A=g.a.Col,W=function(e){R(n,e);var t=U(n);function n(e){var r;return x(this,n),(r=t.call(this,e)).onOk=function(){r.form.validateAll((function(e){e||S.a.post("/team/upsert",r.state.teamInfoData).then((function(e){200===e.data.code?r.props.fetchData():d.a.error(e.data.message)})).catch((function(e){console.error(e)}))}))},r.hideTeamInfoDialog=function(){r.props.hideTeamInfoDialog()},r.formChange=function(e){r.setState({teamInfoData:e})},r.checkbland=function(e,t,n){t?""===t.trim()?n("please input a vaild value"):n():n("required")},r.state={title:r.props.title,teamInfoData:r.props.teamInfo,visible:r.props.visible},r}return j(n,[{key:"componentWillReceiveProps",value:function e(t){this.setState({title:t.title,teamInfoData:t.teamInfo,visible:t.visible})}},{key:"render",value:function e(){var t=this,n={children:"OK"},r={children:"Cancel"};return a.a.createElement(b.a,{className:"simple-form-dialog",onOk:this.onOk,onCancel:this.hideTeamInfoDialog,onClose:this.hideTeamInfoDialog,visible:this.state.visible,isFullScreen:!0,style:J.simpleFormDialog,okProps:n,cancelProps:r},a.a.createElement(T.FormBinderWrapper,{value:this.state.teamInfoData,onChange:this.formChange,ref:function e(n){t.form=n}},a.a.createElement("div",{style:J.formContent},a.a.createElement("h2",{style:J.formTitle},this.state.title),a.a.createElement(L,{style:J.formRow},a.a.createElement(A,{span:"4"},a.a.createElement("label",{style:J.formLabel},"Team Name:")),a.a.createElement(A,{span:"18"},a.a.createElement(T.FormBinder,{name:"name",required:!0,validator:this.checkbland},a.a.createElement(C.a,{size:"medium",placeholder:"team name",style:J.input})),a.a.createElement(T.FormError,{name:"name"}))))))}}]),n}(r.Component);W.displayName="TeamInfo";var J={formContent:{width:"100%",position:"relative"},formTitle:{margin:"0 0 20px",paddingBottom:"10px",borderBottom:"1px solid #eee"},simpleFormDialog:{width:"500px"},formRow:{marginTop:20},input:{width:"100%"},formLabel:{lineHeight:"26px"}};function z(e){return(z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function M(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function H(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function K(e,t,n){return t&&H(e.prototype,t),n&&H(e,n),e}function q(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Y(e,t)}function Y(e,t){return(Y=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function $(e){var t=X();return function n(){var r=Z(e),a;if(t){var o=Z(this).constructor;a=Reflect.construct(r,arguments,o)}else a=r.apply(this,arguments);return G(this,a)}}function G(e,t){return!t||"object"!==z(t)&&"function"!=typeof t?Q(e):t}function Q(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function X(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Z(e){return(Z=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}var ee=g.a.Col,te=function(e){q(n,e);var t=$(n);function n(){var e;M(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={isLoading:!1,dataSource:[],teamInfoDialog:!1,teamInfoData:{},teamInfoDialogTitle:"",filterDataSource:[],pageData:[]},e.componentWillUnmount=function(){e.mounted=!1},e.handleEdit=function(t){e.setState({teamInfoDialog:!0,teamInfoDialogTitle:"Edit Team",teamInfoData:Object.create(Object.getPrototypeOf(t),Object.getOwnPropertyDescriptors(t))})},e.addNewTeam=function(){e.setState({teamInfoDialog:!0,teamInfoDialogTitle:"New Team",teamInfoData:{}})},e.hideTeamInfoDialog=function(){e.setState({teamInfoDialog:!1,teamInfoData:{},teamInfoDialogTitle:""})},e.handleDelete=function(t){b.a.confirm({title:"Delete Team",content:"confirm delete this team: ".concat(t.name,"?"),onOk:function n(){return e.deleteTeam(t.id)},okProps:{children:"OK"},cancelProps:{children:"Cancel"}})},e.handleAddUser=function(t){e.props.showTeamUserInfo(t)},e.deleteTeam=function(t){S.a.delete("/team/del/".concat(t)).then((function(t){200===t.data.code?e.fetchData():d.a.error(t.data.message)})).catch((function(e){console.error(e)}))},e.fetchData=function(){e.setState({isLoading:!0,teamInfoDialog:!1},(function(){S.a.get("/team/").then((function(t){if(200===t.data.code){if(e.mounted){var n=Object(D.d)(t.data.data,"name");e.setState({dataSource:n,isLoading:!1,filterDataSource:n})}}else d.a.error(t.data.message),e.setState({isLoading:!1})})).catch((function(t){console.error(t),e.setState({isLoading:!1})}))}))},e.refreshTableData=function(t){e.setState({filterDataSource:t})},e.redrawPageData=function(t){e.setState({pageData:t})},e.renderOper=function(t,n,r){return a.a.createElement("div",{style:ne.oper},a.a.createElement("span",{title:"AddUser",style:ne.operBtn},a.a.createElement(h.a,{size:"xs",type:"account",onClick:function t(){e.handleAddUser(r)}})),a.a.createElement(w.a,{rolename:"admin"},a.a.createElement("span",{style:ne.separator}),a.a.createElement("span",{title:"Edit",style:ne.operBtn},a.a.createElement(h.a,{size:"xs",type:"edit",onClick:function t(){e.handleEdit(r)}})),a.a.createElement("span",{style:ne.separator}),a.a.createElement("span",{title:"Delete",style:ne.operBtn},a.a.createElement(h.a,{size:"xs",type:"close",onClick:function t(){e.handleDelete(r)}}))))},e}return K(n,[{key:"componentDidMount",value:function e(){}},{key:"componentWillMount",value:function e(){this.mounted=!0}},{key:"onSort",value:function e(t,n){var r=Object(D.e)(this.state.filterDataSource,t,n);this.refreshTableData(r)}},{key:"render",value:function e(){var t=this,n=this.state.isLoading,r=a.a.createElement(ee,{align:"center"},a.a.createElement(w.a,{rolename:"admin"},a.a.createElement(f.a,{type:"secondary",onClick:this.addNewTeam},a.a.createElement(h.a,{type:"add"}),"New Team")));return a.a.createElement("div",null,a.a.createElement(W,{title:this.state.teamInfoDialogTitle,teamInfo:this.state.teamInfoData,visible:this.state.teamInfoDialog,hideTeamInfoDialog:this.hideTeamInfoDialog,fetchData:this.fetchData}),a.a.createElement(O.a,{dataSource:this.state.dataSource,refreshTableData:this.refreshTableData,refreshDataSource:this.fetchData,searchTitle:"Filter",searchField:"name",searchPlaceholder:"Input team Name",otherComponent:r,id:"settingTeam"}),a.a.createElement(s.a,{loading:n,dataSource:this.state.pageData,hasBorder:!1,onSort:function e(n,r){return t.onSort(n,r)},primaryKey:"id"},a.a.createElement(s.a.Column,{title:"Name",dataIndex:"name",sortable:!0}),a.a.createElement(s.a.Column,{title:"Operation",cell:this.renderOper})),a.a.createElement(E.a,{dataSource:this.state.filterDataSource,redrawPageData:this.redrawPageData}))}}]),n}(r.Component),ne={separator:{margin:"0 8px",display:"inline-block",height:"12px",width:"1px",verticalAlign:"middle",background:"#e8e8e8"},operBtn:{display:"inline-block",width:"24px",height:"24px",borderRadius:"999px",color:"#929292",background:"#f2f2f2",textAlign:"center",cursor:"pointer",lineHeight:"24px",marginRight:"6px"}},re=n(56),ae=n.n(re),oe=n(156),ie=n(69);function ce(e){return(ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function le(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function se(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ue(e,t,n){return t&&se(e.prototype,t),n&&se(e,n),e}function fe(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pe(e,t)}function pe(e,t){return(pe=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function he(e){var t=ye();return function n(){var r=be(e),a;if(t){var o=be(this).constructor;a=Reflect.construct(r,arguments,o)}else a=r.apply(this,arguments);return me(this,a)}}function me(e,t){return!t||"object"!==ce(t)&&"function"!=typeof t?de(e):t}function de(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ye(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function be(e){return(be=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}var ve=g.a.Row,ge=g.a.Col,Se=function(e){fe(n,e);var t=he(n);function n(e){var r;return le(this,n),(r=t.call(this,e)).onClick=function(){var e=r.state.selectUserId,t=r.state.teamId;S.a.post("/team/adduser",{userId:"".concat(e),teamId:"".concat(t)}).then((function(e){200===e.data.code?(d.a.success(e.data.message),r.refreshData(t),r.setState({selectValue:"",addUserButton:!0})):d.a.error(e.data.message)})).catch((function(e){console.error(e)}))},r.refreshData=function(e){r.props.refreshData(e)},r.onSelectChange=function(e,t,n){r.setState({selectUserId:e,selectValue:n.label,addUserButton:!1})},r.state={selectUserDatas:r.props.selectUserDatas,teamId:r.props.teamId,selectValue:"",addUserButton:!0},r}return ue(n,[{key:"componentWillReceiveProps",value:function e(t){this.setState({selectUserDatas:t.selectUserDatas,teamId:t.teamId})}},{key:"render",value:function e(){var t=this.state.selectUserDatas;return a.a.createElement("div",null,a.a.createElement(ve,{style:we.row},a.a.createElement(ge,null,a.a.createElement(ie.a,{showSearch:!0,dataSource:t,placeholder:"please select user",style:{width:300},onChange:this.onSelectChange,value:this.state.selectValue}),a.a.createElement(f.a,{type:"secondary",disabled:this.state.addUserButton,onClick:this.onClick},"Add User To Team"))))}}]),n}(r.Component),we={row:{margin:"4px 0 20px"}};function De(e){return(De="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function Ee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Oe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ie(e,t,n){return t&&Oe(e.prototype,t),n&&Oe(e,n),e}function Ce(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Te(e,t)}function Te(e,t){return(Te=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function ke(e){var t=je();return function n(){var r=Re(e),a;if(t){var o=Re(this).constructor;a=Reflect.construct(r,arguments,o)}else a=r.apply(this,arguments);return xe(this,a)}}function xe(e,t){return!t||"object"!==De(t)&&"function"!=typeof t?Pe(e):t}function Pe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function je(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Re(e){return(Re=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}var _e=function(e){Ce(n,e);var t=ke(n);function n(e){var r;return Ee(this,n),(r=t.call(this,e)).handleDelete=function(e){b.a.confirm({title:"Delete User",content:"confirm remove this User: ".concat(e.name,"?"),onOk:function t(){return r.deleteUser(e.id)},okProps:{children:"OK"},cancelProps:{children:"Cancel"}})},r.refreshData=function(e){r.fetchNotExistInTeamUsers(e),r.fetchUserInfoByTeamId(e)},r.fetchNotExistInTeamUsers=function(e){S.a.get("/users/all/".concat(e)).then((function(e){200===e.data.code?r.mounted&&r.setState({selectUserDatas:e.data.data}):d.a.error(e.data.message)})).catch((function(e){console.error(e)}))},r.deleteUser=function(e){var t=r.state.teamInfoData.id;S.a.delete("/team/del/user?userId=".concat(e,"&teamId=").concat(t)).then((function(e){200===e.data.code?r.refreshData(t):d.a.error(e.data.message)})).catch((function(e){d.a.error("server error!"),console.error(e)}))},r.componentWillUnmount=function(){r.mounted=!1},r.fetchUserInfoByTeamId=function(e){r.setState({isLoading:!0},(function(){S.a.get("/team/userinfos/".concat(e)).then((function(e){200===e.data.code?r.mounted&&r.setState({userInfoDataList:e.data.data,isLoading:!1}):d.a.error(e.data.message)})).catch((function(e){d.a.error("server error!"),console.error(e)}))}))},r.backward=function(){r.props.teamUserShow()},r.renderOper=function(e,t,n){var o=n.name,i=JSON.parse(sessionStorage.getItem("user")),c=i.name,l;return"ADMIN"===i.role||o===c?a.a.createElement("div",{style:Ue.oper},a.a.createElement("span",{title:"Delete",style:Ue.operBtn},a.a.createElement(h.a,{size:"xs",type:"close",onClick:function e(){r.handleDelete(n)}}))):void 0},r.state={isLoading:!1,teamInfoData:r.props.teamInfoData,userInfoDataList:[],selectUserDatas:[]},r}return Ie(n,[{key:"componentDidMount",value:function e(){this.refreshData(this.state.teamInfoData.id)}},{key:"componentWillMount",value:function e(){this.mounted=!0}},{key:"componentWillReceiveProps",value:function e(t){this.setState({teamInfoData:t.teamInfoData})}},{key:"onSort",value:function e(t,n){var r=[];r=this.state.userInfoDataList.sort((function(e,r){return e=e[t],r=r[t],"asc"===n?e.localeCompare(r):r.localeCompare(e)})),this.setState({userInfoDataList:r})}},{key:"render",value:function e(){var t=this,n=this.state.isLoading,r=this.state.userInfoDataList,o=this.state.teamInfoData.id,i=this.state.selectUserDatas;return a.a.createElement("div",null,a.a.createElement(ae.a,{onClick:function e(){return t.backward()},style:Ue.backward,size:"large",type:"backward"}),a.a.createElement("span",{style:{fontSize:"16px",fontWeight:"500"}},this.props.teamInfoData.name),a.a.createElement(Se,{teamId:o,selectUserDatas:i,refreshData:this.refreshData}),a.a.createElement(s.a,{loading:n,dataSource:r,hasBorder:!1,onSort:function e(n,r){return t.onSort(n,r)},primaryKey:"id"},a.a.createElement(s.a.Column,{title:"Name",dataIndex:"name",sortable:!0}),a.a.createElement(s.a.Column,{title:"Email",dataIndex:"email"}),a.a.createElement(s.a.Column,{title:"Operation",cell:this.renderOper})))}}]),n}(r.Component),Ue={operBtn:{display:"inline-block",width:"24px",height:"24px",borderRadius:"999px",color:"#929292",background:"#f2f2f2",textAlign:"center",cursor:"pointer",lineHeight:"24px",marginRight:"6px"},backward:{display:"inline-block",minWidth:"40px",marginBottom:"15px",cursor:"pointer",color:"#0066FF"}};function Fe(e){return(Fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function Ve(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ne(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Be(e,t,n){return t&&Ne(e.prototype,t),n&&Ne(e,n),e}function Le(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ae(e,t)}function Ae(e,t){return(Ae=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function We(e){var t=Me();return function n(){var r=He(e),a;if(t){var o=He(this).constructor;a=Reflect.construct(r,arguments,o)}else a=r.apply(this,arguments);return Je(this,a)}}function Je(e,t){return!t||"object"!==Fe(t)&&"function"!=typeof t?ze(e):t}function ze(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Me(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function He(e){return(He=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}var Ke=function(e){Le(n,e);var t=We(n);function n(){var e;Ve(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={teamUserShow:!1,teamInfoData:{}},e.showTeamUserInfo=function(t){e.setState({teamInfoData:t,teamUserShow:!0})},e.transform=function(){e.setState({teamUserShow:!e.state.teamUserShow})},e}return Be(n,[{key:"render",value:function e(){var t=[{link:"",text:"Setting"},{link:"",text:"Team"}],n=this.state.teamUserShow;return n&&t.push({link:"",text:"User"}),a.a.createElement("div",null,a.a.createElement(c.a,{items:t,title:"Team"}),a.a.createElement(i.a,{style:qe.container},n?a.a.createElement(_e,{teamInfoData:this.state.teamInfoData,teamUserShow:this.transform}):a.a.createElement(te,{showTeamUserInfo:this.showTeamUserInfo})))}}]),n}(r.Component),qe={container:{margin:"20px",padding:"10px 20px 20px",minHeight:"600px"}},Ye=t.default=Ke}}]);