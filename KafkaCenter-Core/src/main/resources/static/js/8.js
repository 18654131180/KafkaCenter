(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{898:function(e,t,n){"use strict";var r=n(385),a=n(270),o=n(38),i=n(12),c=n(89),l=n(16),s=n(156),u=n(69),f=n(82),p=n(21),h=n(134),d=n(47),m=n(1),y=n.n(m),b=n(23),v=n(105);function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function w(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(e,t,n){return t&&S(e.prototype,t),n&&S(e,n),e}function O(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}function C(e,t){return(C=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function D(e){var t=T();return function n(){var r=j(e),a;if(t){var o=j(this).constructor;a=Reflect.construct(r,arguments,o)}else a=r.apply(this,arguments);return F(this,a)}}function F(e,t){return!t||"object"!==g(t)&&"function"!=typeof t?P(e):t}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}var R=d.a.Row,x=d.a.Col,k=function(e){O(n,e);var t=D(n);function n(e){var r;w(this,n),(r=t.call(this,e)).componentWillUnmount=function(){r.mounted=!1},r.arrayIsEqual=function(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(var n=0;n<e.length;n+=1){var r=JSON.stringify(e[n]),a=JSON.stringify(t[n]);if(0!==r.localeCompare(a))return!1}return!0},r.refreshTableData=function(e){r.props.refreshTableData(e)},r.getCluster=function(){var e=[{value:"-1",label:"ALL"}];b.a.get("/monitor/cluster").then((function(t){if(200===t.data.code){var n=t.data.data[0].id,a=t.data.data[0].name,o=r.state.clusterValue;t.data.data.forEach((function(t){t.id<n&&(n=t.id,a=t.name),e.push({value:t.id,label:t.name})}));var i=Object(v.a)(r.props.id).id;if(null!=i?r.props.refreshDataSource(i):r.props.refreshDataSource(n),void 0===o&&"settingUser"!==r.props.id&&"settingTeam"!==r.props.id){var c={id:n,cluster:a,isAll:!1};Object(v.d)(r.props.id,c),o=a}r.setState({clusterSelectData:e,clusterValue:o})}})).catch((function(e){console.error("error",e),void 0!==e.response&&void 0!==e.response.status&&""!==e.response.status&&null!=e.response.status&&null!=e.response.status&&(401===e.response.status?p.a.error({content:"Please login!",closeable:!0}):p.a.error({content:"get cluster faily!",duration:1e4,closeable:!0}))}))},r.handleClusterFilterChange=function(e,t){r.props.refreshDataSource(t.value);var n=r.state.dataSource;e=t.label.toString();var a={id:t.value,cluster:t.label,isAll:!1};"-1"===t.value&&(a.isAll=!0),Object(v.d)(r.props.id,a);var o=r.filterByPara(n,r.state.clusterField,e,r.state.searchField,r.state.searchValue,r.state.switchField,r.state.switchValue);r.setState({clusterValue:e}),r.refreshTableData(o)},r.handleFilterChange=function(e){e=e.toString();var t=r.state.dataSource,n=r.filterByPara(t,r.state.clusterField,r.state.clusterValue,r.state.searchField,e,r.state.switchField,r.state.switchValue);r.setState({searchValue:e}),r.refreshTableData(n),r.setSesion("".concat(r.props.id,"Search"),e)},r.onSwitchChange=function(e){var t=r.state.dataSource,n=r.filterByPara(t,r.state.clusterField,r.state.clusterValue,r.state.searchField,r.state.searchValue,r.state.switchField,e);r.setState({switchValue:e}),r.refreshTableData(n),r.setSesion("".concat(r.props.id,"Switch"),e)},r.setSesion=function(e,t){void 0!==e&&sessionStorage.setItem(e,t)},r.initData=function(e){var t=JSON.parse(JSON.stringify(e)),n=r.filterByPara(t,r.state.clusterField,r.state.clusterValue,r.state.searchField,r.state.searchValue,r.state.switchField,r.state.switchValue);r.setState({dataSource:t}),r.refreshTableData(n)},r.filterByPara=function(e,t,n,a,o,i,c){var l=JSON.parse(JSON.stringify(e));return r.isNullOrEmptyStr(i)||c&&"false"!==c||(l=l.filter((function(e){return!e[i].startsWith("_")}))),r.isNullOrEmptyStr(n)||"ALL"===n||(l=r.searchdata(l,t,n)),r.isNullOrEmptyStr(o)||(l=r.searchdata(l,a,o)),l},r.searchdata=function(e,t,n){var r=t.split(",");return e.filter((function(e){for(var t=!1,a=0,o=r.length;a<o;a+=1){for(var i=r[a].split("."),c=e,l=0,s=i.length;l<s;l+=1)c=c[i[l]];if(-1!==c.toLocaleLowerCase().search(n.toLocaleLowerCase())){t=!0;break}}return t}))},r.isNullOrEmptyStr=function(e){return null==e||""===e},r.selectView=function(e){return y.a.createElement(x,{align:"center"},y.a.createElement("span",{style:{fontWeight:"600"}},e,":\xa0\xa0\xa0"),y.a.createElement(u.a,{showSearch:!0,dataSource:r.state.clusterSelectData,placeholder:"please select cluster",style:{width:"300px"},onChange:function e(t,n,a){r.handleClusterFilterChange(t,a)},value:r.state.clusterValue}))},r.filterView=function(e,t){return y.a.createElement(x,{align:"center"},y.a.createElement("span",{style:{fontWeight:"600"}},e,":\xa0\xa0\xa0"),y.a.createElement(l.a,{placeholder:r.isNullOrEmptyStr(t)?"Input filter value":t,hasClear:!0,onChange:r.handleFilterChange,style:{width:"300px"},value:r.state.searchValue}))},r.parseBoolean=function(e){return"true"===e||"TRUE"===e||"True"===e||"false"!==e&&"FALSE"!==e&&"False"!==e&&void 0},r.getFilterData=function(e){var t=JSON.parse(JSON.stringify(e)),n;return r.filterByPara(t,r.state.clusterField,r.state.clusterValue,r.state.searchField,r.state.searchValue,r.state.switchField,r.state.switchValue)},r.switchView=function(){var e=r.state.switchValue;return"string"==typeof r.state.switchValue&&(e=r.parseBoolean(r.state.switchValue.trim())),y.a.createElement(x,{align:"center"},y.a.createElement("div",{style:{display:"flex"}},y.a.createElement("span",{style:L.special},"Include special topic:\xa0\xa0"),y.a.createElement(a.a,{onChange:r.onSwitchChange,checked:e,defaultChecked:e,checkedChildren:y.a.createElement(i.a,{type:"select",size:"xs"}),unCheckedChildren:y.a.createElement(i.a,{type:"close",size:"xs"})})))},void 0!==r.props.onRef&&r.props.onRef(P(r));var o=sessionStorage.getItem("".concat(r.props.id,"Search")),c=sessionStorage.getItem("".concat(r.props.id,"Switch"));return r.state={dataSource:r.props.dataSource,clusterSelectData:[],clusterValue:Object(v.a)(r.props.id).cluster,clusterField:r.props.selectField,searchValue:null===o?"":o,searchField:r.props.searchField,switchField:r.props.switchField,switchValue:null!==c&&c},r}return E(n,[{key:"componentWillMount",value:function e(){this.mounted=!0}},{key:"componentDidMount",value:function e(){this.getCluster()}},{key:"componentWillReceiveProps",value:function e(t){this.validateCondition(this.state.dataSource,t.dataSource)&&(this.setState({dataSource:t.dataSource}),this.initData(t.dataSource))}},{key:"validateCondition",value:function e(t,n){return(null!=t||null!=n)&&((void 0!==t||void 0!==n)&&((0!==t.length||0!==n.length)&&(!this.arrayIsEqual(t,n)&&t!==n)))}},{key:"render",value:function e(){var t=this.props.selectTitle,n=this.props.searchTitle,r=this.props.searchPlaceholder,a=this.isNullOrEmptyStr(t)?"":this.selectView(t),o=this.isNullOrEmptyStr(n)?"":this.filterView(n,r),i=this.isNullOrEmptyStr(this.props.otherComponent)?"":this.props.otherComponent,c=this.isNullOrEmptyStr(this.props.switchField)?"":this.switchView();return y.a.createElement(R,{style:L.row},a,o,i,c)}}]),n}(m.Component),L={row:{margin:"20px 4px 20px"},special:{fontFamily:'Roboto, "Helvetica Neue", Helvetica, Tahoma, Arial, "PingFang SC", "Microsoft YaHei"',fontSize:"12px",lineHeight:"1.28571",color:"#333333",alignSelf:"center",fontWeight:"600"}},N=t.a=k},899:function(e,t){function n(e,t){for(var n=0,r=e.length,a;n<r&&!1!==(a=t(e[n],n));n++);}function r(e){return"[object Array]"===Object.prototype.toString.apply(e)}function a(e){return"function"==typeof e}e.exports={isFunction:a,isArray:r,each:n}},904:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enquireScreen=o;var r=void 0;if("undefined"!=typeof window){var a=function e(t){return{media:t,matches:!1,addListener:function e(){},removeListener:function e(){}}};window.matchMedia=window.matchMedia||a,r=n(905)}function o(e,t){r&&r.register(t||"only screen and (max-width: 767.99px)",{match:function t(){e&&e(!0)},unmatch:function t(){e&&e()}})}var i=t.enquire=r},905:function(e,t,n){var r=n(906);e.exports=new r},906:function(e,t,n){var r=n(907),a=n(899),o=a.each,i=a.isFunction,c=a.isArray;function l(){if(!window.matchMedia)throw new Error("matchMedia not present, legacy browsers require a polyfill");this.queries={},this.browserIsIncapable=!window.matchMedia("only all").matches}l.prototype={constructor:l,register:function(e,t,n){var a=this.queries,l=n&&this.browserIsIncapable;return a[e]||(a[e]=new r(e,l)),i(t)&&(t={match:t}),c(t)||(t=[t]),o(t,(function(t){i(t)&&(t={match:t}),a[e].addHandler(t)})),this},unregister:function(e,t){var n=this.queries[e];return n&&(t?n.removeHandler(t):(n.clear(),delete this.queries[e])),this}},e.exports=l},907:function(e,t,n){var r=n(908),a=n(899).each;function o(e,t){this.query=e,this.isUnconditional=t,this.handlers=[],this.mql=window.matchMedia(e);var n=this;this.listener=function(e){n.mql=e.currentTarget||e,n.assess()},this.mql.addListener(this.listener)}o.prototype={constuctor:o,addHandler:function(e){var t=new r(e);this.handlers.push(t),this.matches()&&t.on()},removeHandler:function(e){var t=this.handlers;a(t,(function(n,r){if(n.equals(e))return n.destroy(),!t.splice(r,1)}))},matches:function(){return this.mql.matches||this.isUnconditional},clear:function(){a(this.handlers,(function(e){e.destroy()})),this.mql.removeListener(this.listener),this.handlers.length=0},assess:function(){var e=this.matches()?"on":"off";a(this.handlers,(function(t){t[e]()}))}},e.exports=o},908:function(e,t){function n(e){this.options=e,!e.deferSetup&&this.setup()}n.prototype={constructor:n,setup:function(){this.options.setup&&this.options.setup(),this.initialised=!0},on:function(){!this.initialised&&this.setup(),this.options.match&&this.options.match()},off:function(){this.options.unmatch&&this.options.unmatch()},destroy:function(){this.options.destroy?this.options.destroy():this.off()},equals:function(e){return this.options===e||this.options.match===e}},e.exports=n},975:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),o=n(68),i=n.n(o),c=n(158),l=n(90),s=n(42),u=n(200),f=n(22),p=n(62),h=n(20),d=n(38),m=n(12),y=n(82),b=n(21),v=n(134),g=n(47),w=n(25),S=n(23),E=n(384),O=n(269),C=n(898),D=n(157),F=n(83),P=n(201),T=n(88),j=n(89),R=n(16),x=n(156),k=n(69),L=n(13),N=n(904);function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(Object(n),!0).forEach((function(t){I(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function I(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function M(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function B(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function A(e,t,n){return t&&B(e.prototype,t),n&&B(e,n),e}function W(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&H(e,t)}function H(e,t){return(H=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function J(e){var t=K();return function n(){var r=Y(e),a;if(t){var o=Y(this).constructor;a=Reflect.construct(r,arguments,o)}else a=r.apply(this,arguments);return U(this,a)}}function U(e,t){return!t||"object"!==_(t)&&"function"!=typeof t?z(e):t}function z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function K(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Y(e){return(Y=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}var Z=g.a.Row,$=g.a.Col,G={clusterId:"",topicName:"",partition:10,replication:3,ttl:16,comments:""},Q={simpleFormDialog:{width:"640px"},dialogContent:{},formRow:{marginTop:20},input:{width:"100%"},formLabel:{lineHeight:"26px"}},X=function(e){W(n,e);var t=J(n);function n(e){var r;return M(this,n),(r=t.call(this,e)).componentWillUnmount=function(){r.mounted=!1},r.enquireScreenRegister=function(){var e="only screen and (max-width: 720px)";Object(N.enquireScreen)((function(e){r.mounted&&r.setState({isMobile:e})}),e)},r.checkComments=function(e,t,n){""===t.trim()?n("comments is required"):n()},r.checkTopicName=function(e,t,n){var r=/^[0-9a-zA-Z\.\-_]{3,100}$/;""===t.trim()?n("topicName is required"):r.test(t)?n():n("topicName can only consist of letters, numbers, underscores, dashes, and dots, and the length is between 3-100")},r.handelDialog=function(){r.setState({createLoading:!1,value:q(q({},G),{},{clusterId:""})}),r.props.handelDialog()},r.onCreateLoading=function(){r.setState({createLoading:!r.state.createLoading})},r.fectgClusters=function(){S.a.get("/cluster").then((function(e){if(200===e.data.code){var t=r.resouceData(e.data.data);r.setState({clusterInfo:t})}else b.a.error(e.data.message)})).catch((function(e){console.error(e)}))},r.resouceData=function(e){var t=[];return e.map((function(e){var n={value:e.id,label:e.name};t.push(n)})),t},r.onOk=function(){r.refForm.validateAll((function(e){e||r.setState({createLoading:!0},(function(){var e=r.state.value;""===r.state.value.clusterId&&(e.clusterId=r.state.value.clusterName),S.a.post("/topic/admin_create",e).then((function(t){200===t.data.code?(r.handelDialog(),r.props.fetchData(e.clusterId),b.a.success(t.data.message)):(r.onCreateLoading(),b.a.error(t.data.message))})).catch((function(){r.onCreateLoading(),b.a.error("Create Topic has error.")}))}))}))},r.onFormChange=function(e){r.setState({value:q({},e)})},r.state={visible:r.props.visible,value:G,isMobile:!1,createLoading:!1,clusterInfo:[]},r}return A(n,[{key:"componentDidMount",value:function e(){this.enquireScreenRegister(),this.fectgClusters()}},{key:"componentWillMount",value:function e(){this.mounted=!0}},{key:"componentWillReceiveProps",value:function e(t){this.setState({visible:t.visible})}},{key:"render",value:function e(){var t=this,n=this.state.isMobile,r=q({},Q.simpleFormDialog);return n&&(r.width="300px"),a.a.createElement(F.a,{className:"simple-form-dialog",style:r,autoFocus:!1,footerAlign:"center",title:"Create Topic",onOk:this.onOk,onCancel:this.handelDialog,onClose:this.handelDialog,isFullScreen:!0,visible:this.state.visible,okProps:{children:"OK"},cancelProps:{children:"Cancel"}},a.a.createElement(L.FormBinderWrapper,{ref:function e(n){t.refForm=n},value:this.state.value,onChange:this.onFormChange},a.a.createElement("div",{style:Q.dialogContent},a.a.createElement(s.a,{visible:this.state.createLoading,style:{width:"100%"}},a.a.createElement(Z,{style:Q.formRow},a.a.createElement($,{span:"".concat(n?"6":"4")},a.a.createElement("label",{style:Q.formLabel},"Cluster Name:")),a.a.createElement($,{span:"".concat(n?"18":"16")},a.a.createElement(L.FormBinder,{name:"clusterId",required:!0},a.a.createElement(k.a,{showSearch:!0,dataSource:this.state.clusterInfo,placeholder:"please select cluster",style:{width:"100%"},disabled:this.state.value.disabled})),a.a.createElement(L.FormError,{name:"clusterId"}))),a.a.createElement(Z,{style:Q.formRow},a.a.createElement($,{span:"".concat(n?"6":"4")},a.a.createElement("label",{style:Q.formLabel},"Topic Name:")),a.a.createElement($,{span:"".concat(n?"18":"16")},a.a.createElement(L.FormBinder,{name:"topicName",required:!0,min:2,max:50,validator:this.checkTopicName},a.a.createElement(R.a,{style:Q.input,placeholder:""})),a.a.createElement(L.FormError,{name:"topicName"}))),a.a.createElement(Z,{style:Q.formRow},a.a.createElement($,{span:"".concat(n?"6":"4")},a.a.createElement("label",{style:Q.formLabel},"Message Rate:")),a.a.createElement($,{span:"".concat(n?"18":"16")},a.a.createElement(L.FormBinder,{name:"messageRate",required:!0},a.a.createElement(T.a,{step:50,min:1})),a.a.createElement(L.FormError,{name:"messageRate"}),"\xa0\xa0(message/s)")),a.a.createElement(Z,{style:Q.formRow},a.a.createElement($,{span:"".concat(n?"6":"4")},a.a.createElement("label",{style:Q.formLabel},"Partitions:")),a.a.createElement($,null,a.a.createElement(L.FormBinder,{name:"partition",required:!0},a.a.createElement(T.a,{min:1})),a.a.createElement(L.FormError,{name:"partition"}))),a.a.createElement(Z,{style:Q.formRow},a.a.createElement($,{span:"".concat(n?"6":"4")},a.a.createElement("label",{style:Q.formLabel},"Replication Factor:")),a.a.createElement($,null,a.a.createElement(L.FormBinder,{name:"replication",required:!0},a.a.createElement(T.a,{min:1,max:10})),a.a.createElement(L.FormError,{name:"replication"}))),a.a.createElement(Z,{style:Q.formRow},a.a.createElement($,{span:"".concat(n?"6":"4")},a.a.createElement("label",{style:Q.formLabel},"TTL:")),a.a.createElement($,null,a.a.createElement(L.FormBinder,{name:"ttl",required:!0},a.a.createElement(T.a,{min:1})),a.a.createElement(L.FormError,{name:"ttl"}),"\xa0\xa0(H)")),a.a.createElement(Z,{style:Q.formRow},a.a.createElement($,null,a.a.createElement(L.FormBinder,{name:"comments",required:!0,validator:this.checkComments},a.a.createElement(R.a.TextArea,{style:Q.input,placeholder:"Enter comments",rows:4})),a.a.createElement(L.FormError,{name:"comments"})))))))}}]),n}(r.Component),ee,te;function ne(e){return(ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function re(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ae(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function oe(e,t,n){return t&&ae(e.prototype,t),n&&ae(e,n),e}function ie(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ce(e,t)}function ce(e,t){return(ce=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function le(e){var t=fe();return function n(){var r=pe(e),a;if(t){var o=pe(this).constructor;a=Reflect.construct(r,arguments,o)}else a=r.apply(this,arguments);return se(this,a)}}function se(e,t){return!t||"object"!==ne(t)&&"function"!=typeof t?ue(e):t}function ue(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fe(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function pe(e){return(pe=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}X.displayName="EditDialog";var he=g.a.Col,de=Object(w.withRouter)(ee=te=function(e){ie(n,e);var t=le(n);function n(){var e;re(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={isLoading:!1,filterDataSource:[],dataSource:[],pageData:[],visible:!1},e.fetchTopicList=function(t){e.setState({isLoading:!0},(function(){S.a.get("/manager/topic/list?cluster=".concat(t)).then((function(t){if(200===t.data.code){if(e.mounted){var n=Object(E.d)(t.data.data,"topicName");return e.setState({dataSource:n,filterDataSource:n,isLoading:!1},(function(){})),n}}else b.a.error(t.data.message)})).catch((function(t){console.error(t),e.setState({isLoading:!1})}))}))},e.handelDetail=function(t){e.props.history.push("/kafka-manager/topic/".concat(t.clusterId,"/").concat(t.topicName))},e.renderTopic=function(t,n,r){return a.a.createElement("div",null,a.a.createElement("a",{style:me.topicLink,onClick:function t(){return e.handelDetail(r)}},r.topicName))},e.renderTTL=function(e,t,n){return null!==e&&e?Object(E.g)(e):"-"},e.redrawPageData=function(t){e.setState({pageData:t})},e.refreshTableData=function(t){e.setState({filterDataSource:t})},e.onSort=function(t,n){var r=Object(E.e)(e.state.filterDataSource,t,n);e.refreshTableData(r)},e.renderUnderRep=function(e){return 0!==e?"".concat(e,"%"):e},e.handelDialog=function(){e.setState({visible:!e.state.visible})},e.hideDialog=function(){e.setState({visible:!e.state.visible})},e}return oe(n,[{key:"componentWillMount",value:function e(){this.mounted=!0}},{key:"componentWillUnmount",value:function e(){this.mounted=!1}},{key:"render",value:function e(){var t=this,n=a.a.createElement(he,{align:"center"},a.a.createElement(h.a,{type:"secondary",onClick:this.handelDialog},a.a.createElement(m.a,{type:"add"}),"Create Topic")),r=this.state.visible;return a.a.createElement("div",null,a.a.createElement(s.a,{visible:this.state.isLoading,style:me.loading},a.a.createElement(X,{visible:r,handelDialog:this.handelDialog,fetchData:this.fetchTopicList}),a.a.createElement(C.a,{dataSource:this.state.dataSource,refreshTableData:this.refreshTableData,refreshDataSource:this.fetchTopicList,selectTitle:"Cluster",selectField:"cluster",searchTitle:"Filter",searchField:"topicName",searchPlaceholder:"Input Topic Name",switchField:"topicName",otherComponent:n,id:"kafkaManagerTopic"}),a.a.createElement(f.a,{dataSource:this.state.pageData,hasBorder:!1,onSort:function e(n,r){return t.onSort(n,r)}},a.a.createElement(f.a.Column,{title:"Topic Name",dataIndex:"topicName",cell:this.renderTopic,sortable:!0}),a.a.createElement(f.a.Column,{title:"Partition",dataIndex:"partition"}),a.a.createElement(f.a.Column,{title:"Replication",dataIndex:"replication"}),a.a.createElement(f.a.Column,{title:"TTL(hours)",dataIndex:"ttl",cell:this.renderTTL}),a.a.createElement(f.a.Column,{title:"Cluster",dataIndex:"cluster"}),a.a.createElement(f.a.Column,{title:"Under Replication(%)",dataIndex:"under_replication",cell:this.renderUnderRep})),a.a.createElement(O.a,{dataSource:this.state.filterDataSource,redrawPageData:this.redrawPageData})))}}]),n}(r.Component))||ee,me={topicLink:{margin:"0 5px",color:"#1111EE",cursor:"pointer",textDecoration:"none"},loading:{width:"100%"}};function ye(e){return(ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function be(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ve(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ge(e,t,n){return t&&ve(e.prototype,t),n&&ve(e,n),e}function we(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Se(e,t)}function Se(e,t){return(Se=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function Ee(e){var t=De();return function n(){var r=Fe(e),a;if(t){var o=Fe(this).constructor;a=Reflect.construct(r,arguments,o)}else a=r.apply(this,arguments);return Oe(this,a)}}function Oe(e,t){return!t||"object"!==ye(t)&&"function"!=typeof t?Ce(e):t}function Ce(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function De(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Fe(e){return(Fe=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}var Pe=function(e){we(n,e);var t=Ee(n);function n(){return be(this,n),t.apply(this,arguments)}return ge(n,[{key:"render",value:function e(){var t=[{link:"",text:"Kafka Manager"},{link:"",text:"Topic"}];return a.a.createElement("div",null,a.a.createElement(c.a,{items:t,title:"Topic List"}),a.a.createElement(i.a,{style:Te.container},a.a.createElement(de,null)))}}]),n}(r.Component),Te={container:{margin:"20px",padding:"10px 20px 20px"}},je=t.default=Pe}}]);